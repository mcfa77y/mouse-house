webpackJsonp([4],{2:function(module,exports){eval("module.exports = jQuery;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImpRdWVyeVwiPzBjYjgiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBqUXVlcnk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJqUXVlcnlcIlxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSAyIDMgNCA1IDYgNyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n")},325:function(module,exports,__webpack_require__){"use strict";eval("\n\nvar _toastr = __webpack_require__(18);\n\nvar Toastr = _interopRequireWildcard(_toastr);\n\nvar _lodash = __webpack_require__(8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _Axios = __webpack_require__(19);\n\nvar Axios = _interopRequireWildcard(_Axios);\n\n__webpack_require__(232);\n\n__webpack_require__(6);\n\n__webpack_require__(233);\n\n__webpack_require__(234);\n\n__webpack_require__(237);\n\n__webpack_require__(238);\n\nvar _csModelCommon = __webpack_require__(5);\n\nvar _csFormHelper = __webpack_require__(239);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n$(function () {\n    var column_names = ['id', 'id_alias', 'ear_tag', 'age', 'dob', 'genotype', 'sex', 'notes', 'status', 'created_at', 'updated_at'];\n    var mouse_table = (0, _csModelCommon.setup_table)({ model_name: 'mouse', column_names: column_names, hide_id_column: true });\n\n    setup_aggregation_buttons(mouse_table);\n    (0, _csModelCommon.setup_list_page_buttons)('mouse', mouse_table);\n    setup_cage_mice_modal(mouse_table);\n});\n\nvar setup_aggregation_buttons = function setup_aggregation_buttons(table) {\n\n    var pair_button = $('#breed-mouse-button');\n    var cage_button = $('#cage-mouse-button');\n\n    function update_buttons() {\n        var selected_row_count = table.rows({ selected: true }).data().pluck('id').length;\n\n        var disable_pair = true;\n        var disable_cage = true;\n\n        // todo: create validation for M1 : F*\n        if (selected_row_count >= 2) {\n            disable_pair = false;\n        }\n\n        if (selected_row_count > 0) {\n            disable_cage = false;\n        }\n\n        pair_button.attr('disabled', disable_pair);\n        cage_button.attr('disabled', disable_cage);\n    }\n\n    function on_select(e, dt, type, indexes) {\n        update_buttons();\n        if (type === 'row') {\n\n            // do something with the ID of the selected items\n        }\n    }\n    update_buttons();\n    table.on('select', on_select);\n    table.on('deselect', on_select);\n\n    pair_button.click(function () {\n        var mouse_ids = table.get_selected_row_ids();\n        var data = {\n            mouse_ids: mouse_ids\n        };\n        Axios.post('/mouse/breed_mice_together', data).then(function (response) {\n            console.log(response);\n            Toastr.success(\"paired\");\n            window.location.href = '/mouse';\n            return false;\n        }).catch(function (error) {\n            console.log(error);\n            Toastr.error(error);\n        });\n    });\n};\n\nvar setup_cage_mice_modal = function setup_cage_mice_modal(mouse_table) {\n    var columns = ['id', 'id_alias', 'name', 'type', 'setup_date', 'update_date', 'end_date', 'mice', 'notes'];\n    columns = columns.map(function (x) {\n        return { data: x };\n    });\n\n    var table_options = {\n        select: true,\n        responsive: true,\n        dom: 'lBfrtip',\n        buttons: ['colvis'],\n        columns: columns,\n        scrollY: \"100%\",\n        paging: false,\n        info: false,\n        columnDefs: [{\n            targets: [0],\n            visible: false,\n            searchable: false\n        }]\n    };\n\n    var cage_name_input = $('#cage_name');\n    var table = $('#cage-list').DataTable(table_options);\n\n    function on_select(e, dt, type, indexes) {\n        cage_name_input.val('');\n    }\n    table.on('select', on_select);\n\n    cage_name_input.change(function () {\n        table.rows().deselect();\n    });\n\n    function get_selected_row_ids() {\n        var data = table.rows({ selected: true }).data().pluck('id');\n\n        return _lodash2.default.range(data.length).map(function (index) {\n            return data[index];\n        });\n    }\n    table.get_selected_row_ids = get_selected_row_ids;\n\n    var success = function success(response) {\n        console.log(response);\n        Toastr.success(\"updated\");\n        window.location.href = '/mouse';\n        return false;\n    };\n\n    var error = function error(_error) {\n        console.log(_error);\n        Toastr.error(_error);\n    };\n\n    var cage_mice_together_button = $('#cage-mice-together-button');\n    cage_mice_together_button.click(function () {\n\n        var mouse_ids = mouse_table.get_selected_row_ids();\n        var cage_id = table.get_selected_row_ids();\n        var data = {\n            mouse_ids: mouse_ids,\n            cage_id: cage_id\n        };\n        var dt = (0, _csFormHelper.form_ids_vals)('mouse-cage-fields');\n        (0, _csFormHelper.json_string)(dt);\n\n        data = $.extend(data, dt);\n        Axios.post('/mouse/cage_mice_together', data).then(success).catch(error);\n    });\n    // setup_table({model_name: 'cage', column_names, hide_id_column:true })\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3B1YmxpY19zcmMvamF2YXNjcmlwdHMvY3MtbW91c2UtbGlzdC5qcz9kZWUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFRvYXN0ciBmcm9tICd0b2FzdHInXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5pbXBvcnQgKiBhcyBBeGlvcyBmcm9tICdBeGlvcydcblxuaW1wb3J0ICdib290c3RyYXAnXG5pbXBvcnQgJ2RhdGF0YWJsZXMubmV0J1xuaW1wb3J0ICdkYXRhdGFibGVzLm5ldC1zZWxlY3QnO1xuaW1wb3J0ICdkYXRhdGFibGVzLm5ldC1zZWxlY3QtZHQvY3NzL3NlbGVjdC5kYXRhVGFibGVzLmNzcyc7XG5pbXBvcnQgJ2RhdGF0YWJsZXMubmV0LXJlc3BvbnNpdmUnO1xuaW1wb3J0ICdkYXRhdGFibGVzLm5ldC1yZXNwb25zaXZlLWR0L2Nzcy9yZXNwb25zaXZlLmRhdGFUYWJsZXMubWluLmNzcyc7XG5cbmltcG9ydCB7IHNldHVwX3RhYmxlLCBzZXR1cF9saXN0X3BhZ2VfYnV0dG9ucyB9IGZyb20gJy4vY3MtbW9kZWwtY29tbW9uJ1xuaW1wb3J0IHsgZm9ybV9pZHNfdmFscywganNvbl9zdHJpbmcgfSBmcm9tICAnLi9jcy1mb3JtLWhlbHBlcidcblxuJChmdW5jdGlvbigpIHtcbiAgICBjb25zdCBjb2x1bW5fbmFtZXMgPSBbJ2lkJywgJ2lkX2FsaWFzJywgJ2Vhcl90YWcnLCAnYWdlJywgJ2RvYicsXG4gICAgICAgICdnZW5vdHlwZScsICdzZXgnLCAnbm90ZXMnLFxuICAgICAgICAnc3RhdHVzJywgJ2NyZWF0ZWRfYXQnLFxuICAgICAgICAndXBkYXRlZF9hdCdcbiAgICBdXG4gICAgY29uc3QgbW91c2VfdGFibGUgPSBzZXR1cF90YWJsZSh7IG1vZGVsX25hbWU6ICdtb3VzZScsIGNvbHVtbl9uYW1lcywgaGlkZV9pZF9jb2x1bW46IHRydWUgfSlcblxuICAgIHNldHVwX2FnZ3JlZ2F0aW9uX2J1dHRvbnMobW91c2VfdGFibGUpXG4gICAgc2V0dXBfbGlzdF9wYWdlX2J1dHRvbnMoJ21vdXNlJywgbW91c2VfdGFibGUpXG4gICAgc2V0dXBfY2FnZV9taWNlX21vZGFsKG1vdXNlX3RhYmxlKVxufSlcblxuY29uc3Qgc2V0dXBfYWdncmVnYXRpb25fYnV0dG9ucyA9ICh0YWJsZSkgPT4ge1xuXG4gICAgY29uc3QgcGFpcl9idXR0b24gPSAkKCcjYnJlZWQtbW91c2UtYnV0dG9uJylcbiAgICBjb25zdCBjYWdlX2J1dHRvbiA9ICQoJyNjYWdlLW1vdXNlLWJ1dHRvbicpXG5cbiAgICBmdW5jdGlvbiB1cGRhdGVfYnV0dG9ucygpIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRfcm93X2NvdW50ID0gdGFibGUucm93cyh7IHNlbGVjdGVkOiB0cnVlIH0pLmRhdGEoKS5wbHVjaygnaWQnKS5sZW5ndGhcblxuICAgICAgICBsZXQgZGlzYWJsZV9wYWlyID0gdHJ1ZVxuICAgICAgICBsZXQgZGlzYWJsZV9jYWdlID0gdHJ1ZVxuXG4gICAgICAgIC8vIHRvZG86IGNyZWF0ZSB2YWxpZGF0aW9uIGZvciBNMSA6IEYqXG4gICAgICAgIGlmIChzZWxlY3RlZF9yb3dfY291bnQgPj0gMikge1xuICAgICAgICAgICAgZGlzYWJsZV9wYWlyID0gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxlY3RlZF9yb3dfY291bnQgPiAwKSB7XG4gICAgICAgICAgICBkaXNhYmxlX2NhZ2UgPSBmYWxzZVxuICAgICAgICB9XG5cblxuICAgICAgICBwYWlyX2J1dHRvbi5hdHRyKCdkaXNhYmxlZCcsIGRpc2FibGVfcGFpcilcbiAgICAgICAgY2FnZV9idXR0b24uYXR0cignZGlzYWJsZWQnLCBkaXNhYmxlX2NhZ2UpXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBvbl9zZWxlY3QoZSwgZHQsIHR5cGUsIGluZGV4ZXMpIHtcbiAgICAgICAgdXBkYXRlX2J1dHRvbnMoKVxuICAgICAgICBpZiAodHlwZSA9PT0gJ3JvdycpIHtcblxuICAgICAgICAgICAgLy8gZG8gc29tZXRoaW5nIHdpdGggdGhlIElEIG9mIHRoZSBzZWxlY3RlZCBpdGVtc1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZV9idXR0b25zKClcbiAgICB0YWJsZS5vbignc2VsZWN0Jywgb25fc2VsZWN0KVxuICAgIHRhYmxlLm9uKCdkZXNlbGVjdCcsIG9uX3NlbGVjdClcblxuXG4gICAgcGFpcl9idXR0b24uY2xpY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBtb3VzZV9pZHMgPSB0YWJsZS5nZXRfc2VsZWN0ZWRfcm93X2lkcygpXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICBtb3VzZV9pZHNcbiAgICAgICAgfVxuICAgICAgICBBeGlvcy5wb3N0KCcvbW91c2UvYnJlZWRfbWljZV90b2dldGhlcicsIGRhdGEpXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgICAgICAgICBUb2FzdHIuc3VjY2VzcyhcInBhaXJlZFwiKVxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9tb3VzZSdcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgICAgICAgICAgVG9hc3RyLmVycm9yKGVycm9yKVxuICAgICAgICAgICAgfSk7XG4gICAgfSlcblxufVxuXG5jb25zdCBzZXR1cF9jYWdlX21pY2VfbW9kYWwgPSAobW91c2VfdGFibGUpID0+IHtcbiAgICBsZXQgY29sdW1ucyA9IFsnaWQnLCAnaWRfYWxpYXMnLCAnbmFtZScsXG4gICAgICAgICd0eXBlJywgJ3NldHVwX2RhdGUnLCAndXBkYXRlX2RhdGUnLFxuICAgICAgICAnZW5kX2RhdGUnLCAnbWljZScsICdub3RlcydcbiAgICBdXG4gICAgY29sdW1ucyA9IGNvbHVtbnMubWFwKCh4KSA9PiB7XG4gICAgICAgIHJldHVybiB7IGRhdGE6IHggfVxuICAgIH0pXG5cbiAgICBjb25zdCB0YWJsZV9vcHRpb25zID0ge1xuICAgICAgICBzZWxlY3Q6IHRydWUsXG4gICAgICAgIHJlc3BvbnNpdmU6IHRydWUsXG4gICAgICAgIGRvbTogJ2xCZnJ0aXAnLFxuICAgICAgICBidXR0b25zOiBbJ2NvbHZpcyddLFxuICAgICAgICBjb2x1bW5zLFxuICAgICAgICBzY3JvbGxZOiBcIjEwMCVcIixcbiAgICAgICAgcGFnaW5nOiBmYWxzZSxcbiAgICAgICAgaW5mbzogZmFsc2UsXG4gICAgICAgIGNvbHVtbkRlZnM6IFt7XG4gICAgICAgICAgICB0YXJnZXRzOiBbMF0sXG4gICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHNlYXJjaGFibGU6IGZhbHNlXG4gICAgICAgIH1dXG4gICAgfVxuXG5cbiAgICBsZXQgY2FnZV9uYW1lX2lucHV0ID0gJCgnI2NhZ2VfbmFtZScpXG4gICAgbGV0IHRhYmxlID0gJCgnI2NhZ2UtbGlzdCcpLkRhdGFUYWJsZSh0YWJsZV9vcHRpb25zKTtcblxuICAgIGZ1bmN0aW9uIG9uX3NlbGVjdChlLCBkdCwgdHlwZSwgaW5kZXhlcykge1xuICAgICAgICBjYWdlX25hbWVfaW5wdXQudmFsKCcnKVxuICAgIH1cbiAgICB0YWJsZS5vbignc2VsZWN0Jywgb25fc2VsZWN0KVxuXG4gICAgY2FnZV9uYW1lX2lucHV0LmNoYW5nZSgoKSA9PiB7XG4gICAgICAgIHRhYmxlLnJvd3MoKS5kZXNlbGVjdCgpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGdldF9zZWxlY3RlZF9yb3dfaWRzKCkge1xuICAgICAgICBjb25zdCBkYXRhID0gdGFibGUucm93cyh7IHNlbGVjdGVkOiB0cnVlIH0pLmRhdGEoKS5wbHVjaygnaWQnKTtcblxuICAgICAgICByZXR1cm4gXy5yYW5nZShkYXRhLmxlbmd0aCkubWFwKChpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFbaW5kZXhdXG4gICAgICAgIH0pXG4gICAgfVxuICAgIHRhYmxlLmdldF9zZWxlY3RlZF9yb3dfaWRzID0gZ2V0X3NlbGVjdGVkX3Jvd19pZHNcblxuXG4gICAgY29uc3Qgc3VjY2VzcyA9IChyZXNwb25zZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgVG9hc3RyLnN1Y2Nlc3MoXCJ1cGRhdGVkXCIpXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9tb3VzZSdcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXG4gICAgICAgIFRvYXN0ci5lcnJvcihlcnJvcilcbiAgICB9XG5cbiAgICBjb25zdCBjYWdlX21pY2VfdG9nZXRoZXJfYnV0dG9uID0gJCgnI2NhZ2UtbWljZS10b2dldGhlci1idXR0b24nKVxuICAgIGNhZ2VfbWljZV90b2dldGhlcl9idXR0b24uY2xpY2soKCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IG1vdXNlX2lkcyA9IG1vdXNlX3RhYmxlLmdldF9zZWxlY3RlZF9yb3dfaWRzKClcbiAgICAgICAgY29uc3QgY2FnZV9pZCA9IHRhYmxlLmdldF9zZWxlY3RlZF9yb3dfaWRzKClcbiAgICAgICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICAgICBtb3VzZV9pZHMsXG4gICAgICAgICAgICBjYWdlX2lkXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZHQgPSBmb3JtX2lkc192YWxzKCdtb3VzZS1jYWdlLWZpZWxkcycpXG4gICAgICAgIGpzb25fc3RyaW5nKGR0KVxuXG4gICAgICAgIGRhdGEgPSAkLmV4dGVuZChkYXRhLCBkdCk7XG4gICAgICAgIEF4aW9zLnBvc3QoJy9tb3VzZS9jYWdlX21pY2VfdG9nZXRoZXInLCBkYXRhKVxuICAgICAgICAgICAgLnRoZW4oc3VjY2VzcylcbiAgICAgICAgICAgIC5jYXRjaChlcnJvcik7XG4gICAgfSlcbiAgICAvLyBzZXR1cF90YWJsZSh7bW9kZWxfbmFtZTogJ2NhZ2UnLCBjb2x1bW5fbmFtZXMsIGhpZGVfaWRfY29sdW1uOnRydWUgfSlcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gcHVibGljX3NyYy9qYXZhc2NyaXB0cy9jcy1tb3VzZS1saXN0LmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFUQTtBQUNBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///325\n")}},[325]);